import React, { useState, useEffect } from 'react';
import { 
  Stethoscope, 
  Activity, 
  Users, 
  Building2, 
  Mail, 
  Phone, 
  MapPin, 
  ArrowRight, 
  CheckCircle2, 
  Menu, 
  X, 
  Microscope,
  Syringe,
  Globe2
} from 'lucide-react';

// --- Components ---

const Button = ({ children, variant = 'primary', className = '', onClick, type = 'button' }) => {
  const baseStyle = "px-6 py-3 rounded-full font-medium transition-all duration-300 flex items-center justify-center gap-2 transform active:scale-95";
  const variants = {
    primary: "bg-blue-900 text-white hover:bg-blue-800 shadow-lg hover:shadow-blue-900/30",
    secondary: "bg-white text-blue-900 border border-blue-900 hover:bg-blue-50",
    outline: "border border-white text-white hover:bg-white hover:text-blue-900",
    accent: "bg-sky-500 text-white hover:bg-sky-600 shadow-lg hover:shadow-sky-500/30"
  };

  return (
    <button 
      type={type}
      onClick={onClick} 
      className={`${baseStyle} ${variants[variant]} ${className}`}
    >
      {children}
    </button>
  );
};

const SectionTitle = ({ title, subtitle, align = 'center', color = 'dark' }) => (
  <div className={`mb-12 ${align === 'center' ? 'text-center' : 'text-left'}`}>
    <h2 className={`text-3xl md:text-4xl font-bold mb-4 ${color === 'light' ? 'text-white' : 'text-slate-900'}`}>
      {title}
    </h2>
    {subtitle && (
      <div className={`w-20 h-1 ${align === 'center' ? 'mx-auto' : ''} bg-sky-500 rounded-full mb-4`}></div>
    )}
    {subtitle && (
      <p className={`text-lg ${color === 'light' ? 'text-slate-300' : 'text-slate-600'} max-w-2xl ${align === 'center' ? 'mx-auto' : ''}`}>
        {subtitle}
      </p>
    )}
  </div>
);

const Card = ({ icon: Icon, title, description }) => (
  <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:shadow-xl transition-all duration-300 group">
    <div className="w-14 h-14 bg-blue-50 rounded-xl flex items-center justify-center mb-6 group-hover:bg-blue-900 transition-colors duration-300">
      <Icon className="w-7 h-7 text-blue-900 group-hover:text-white transition-colors duration-300" />
    </div>
    <h3 className="text-xl font-bold text-slate-900 mb-3">{title}</h3>
    <p className="text-slate-600 leading-relaxed">{description}</p>
  </div>
);

// --- Main Application ---

const App = () => {
  const [isScrolled, setIsScrolled] = useState(false);
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [showNetworkForm, setShowNetworkForm] = useState(false);
  const [formStatus, setFormStatus] = useState('idle'); // idle, submitting, success

  // Handle Scroll Effect for Navbar
  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const scrollToSection = (id) => {
    setIsMobileMenuOpen(false);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
    }
  };

  const handleNetworkSubmit = (e) => {
    e.preventDefault();
    setFormStatus('submitting');
    // Simulate API call
    setTimeout(() => {
      setFormStatus('success');
      // Reset after 3 seconds
      setTimeout(() => {
        setFormStatus('idle');
        setShowNetworkForm(false);
      }, 3000);
    }, 1500);
  };

  return (
    <div className="font-sans text-slate-800 antialiased bg-slate-50 selection:bg-blue-200">
      
      {/* Navigation */}
      <nav className={`fixed w-full z-50 transition-all duration-300 ${isScrolled ? 'bg-white/95 backdrop-blur-md shadow-md py-3' : 'bg-transparent py-6'}`}>
        <div className="container mx-auto px-6 flex justify-between items-center">
          {/* Logo Area */}
          <div className="flex items-center gap-2 cursor-pointer" onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}>
            {/* Placeholder for Logo Image - Replaced with text/icon composite if image fails */}
            <div className="flex items-center gap-2">
                <div className="bg-blue-900 text-white p-2 rounded-lg">
                    <Activity size={24} />
                </div>
                <span className={`text-2xl font-bold tracking-tight ${isScrolled ? 'text-blue-900' : 'text-white'}`}>
                  Co-MedX
                </span>
            </div>
          </div>

          {/* Desktop Menu */}
          <div className="hidden md:flex items-center gap-8">
            {['About', 'Services', 'Founders', 'Network'].map((item) => (
              <button 
                key={item}
                onClick={() => scrollToSection(item.toLowerCase())}
                className={`font-medium hover:text-sky-500 transition-colors ${isScrolled ? 'text-slate-600' : 'text-slate-200'}`}
              >
                {item}
              </button>
            ))}
            <Button variant={isScrolled ? "primary" : "accent"} onClick={() => scrollToSection('contact')}>
              Contact Us
            </Button>
          </div>

          {/* Mobile Menu Toggle */}
          <button className="md:hidden text-slate-500" onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>
            {isMobileMenuOpen ? <X className={isScrolled ? 'text-slate-800' : 'text-white'} /> : <Menu className={isScrolled ? 'text-slate-800' : 'text-white'} />}
          </button>
        </div>

        {/* Mobile Menu Dropdown */}
        {isMobileMenuOpen && (
          <div className="md:hidden absolute top-full left-0 w-full bg-white shadow-xl border-t border-slate-100 p-6 flex flex-col gap-4">
            {['About', 'Services', 'Founders', 'Network', 'Contact'].map((item) => (
              <button 
                key={item}
                onClick={() => scrollToSection(item.toLowerCase())}
                className="text-left text-slate-600 font-medium py-2 border-b border-slate-50"
              >
                {item}
              </button>
            ))}
          </div>
        )}
      </nav>

      {/* Hero Section */}
      <header className="relative min-h-screen flex items-center pt-20 overflow-hidden">
        {/* Background Image with Overlay */}
        <div className="absolute inset-0 z-0">
          <img 
            src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80" 
            alt="Medical Laboratory" 
            className="w-full h-full object-cover"
          />
          <div className="absolute inset-0 bg-gradient-to-r from-blue-950/95 to-blue-900/80 mix-blend-multiply"></div>
        </div>

        <div className="container mx-auto px-6 relative z-10 grid md:grid-cols-2 gap-12 items-center">
          <div className="text-white space-y-8 animate-fade-in-up">
            <div className="inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full border border-white/20 text-sm font-medium">
              <Globe2 size={16} className="text-sky-400" />
              <span>Global Standards. Local Reach.</span>
            </div>
            <h1 className="text-5xl md:text-6xl lg:text-7xl font-bold leading-tight">
              Accelerating <br/>
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-teal-300">Primary Care</span> <br/>
              Clinical Trials
            </h1>
            <p className="text-lg md:text-xl text-slate-200 max-w-lg leading-relaxed">
              Co-MedX bridges the gap between clinical research and primary care. 
              We leverage a vast network of GPs and Pharmacies to rapidly identify candidates, 
              ensuring faster, more diverse, and efficient trials.
            </p>
            <div className="flex flex-col sm:flex-row gap-4 pt-4">
              <Button variant="accent" onClick={() => scrollToSection('services')}>
                For Sponsors & CROs
              </Button>
              <Button variant="outline" onClick={() => scrollToSection('network')}>
                Join Our Network
              </Button>
            </div>
          </div>
          
          {/* Abstract Graphic/Stats */}
          <div className="hidden md:block relative">
            <div className="relative bg-white/5 backdrop-blur-md border border-white/10 p-8 rounded-3xl">
              <div className="grid grid-cols-2 gap-6">
                <div className="bg-white/10 p-6 rounded-2xl">
                  <Users className="text-sky-400 mb-2" size={32} />
                  <h3 className="text-3xl font-bold text-white">Fast</h3>
                  <p className="text-slate-300 text-sm">Participant Recruitment</p>
                </div>
                <div className="bg-white/10 p-6 rounded-2xl">
                  <Building2 className="text-teal-400 mb-2" size={32} />
                  <h3 className="text-3xl font-bold text-white">London</h3>
                  <p className="text-slate-300 text-sm">Central Clinic Hub</p>
                </div>
                <div className="col-span-2 bg-gradient-to-r from-sky-600 to-blue-700 p-6 rounded-2xl">
                  <div className="flex items-center gap-4">
                    <div className="p-3 bg-white/20 rounded-full">
                      <Stethoscope className="text-white" size={24} />
                    </div>
                    <div>
                      <p className="text-white font-bold text-lg">GP & Pharmacy Network</p>
                      <p className="text-blue-100 text-sm">Pre-screening at the source</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      {/* About & Process Section */}
      <section id="about" className="py-24 bg-white">
        <div className="container mx-auto px-6">
          <SectionTitle 
            title="Redefining Recruitment" 
            subtitle="Our streamlined process ensures high-quality data and patient safety."
          />

          <div className="grid md:grid-cols-3 gap-8 mt-16">
            {[
              {
                icon: Users,
                title: "Network Identification",
                desc: "Our extensive network of GPs and Pharmacies identify potential candidates within their daily practice."
              },
              {
                icon: CheckCircle2,
                title: "Pre-Screening",
                desc: "Trusted healthcare professionals conduct initial pre-screening locally, ensuring high eligibility rates."
              },
              {
                icon: Building2,
                title: "Clinic Referral",
                desc: "Qualified participants are referred to our specialized London clinic for trial enrollment and monitoring."
              }
            ].map((step, idx) => (
              <div key={idx} className="relative p-8 rounded-3xl bg-slate-50 hover:bg-white border border-transparent hover:border-blue-100 hover:shadow-xl transition-all duration-300">
                <div className="absolute -top-6 left-8 w-12 h-12 bg-blue-900 text-white rounded-full flex items-center justify-center text-xl font-bold shadow-lg">
                  {idx + 1}
                </div>
                <div className="mt-6">
                  <step.icon className="w-10 h-10 text-sky-500 mb-4" />
                  <h3 className="text-xl font-bold text-slate-900 mb-2">{step.title}</h3>
                  <p className="text-slate-600">{step.desc}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Founders Section */}
      <section id="founders" className="py-24 bg-slate-50 border-y border-slate-200">
        <div className="container mx-auto px-6">
          <SectionTitle 
            title="Leadership" 
            subtitle="Driven by experienced clinical researchers and academic fellows."
          />

          <div className="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto">
            {/* Founder 1 */}
            <div className="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300">
              <div className="h-32 bg-gradient-to-r from-blue-900 to-slate-800 relative">
                {/* Placeholder for Photo */}
                <div className="absolute -bottom-16 left-8 w-32 h-32 bg-slate-200 rounded-full border-4 border-white overflow-hidden flex items-center justify-center text-slate-400">
                   <span className="text-xs text-center px-2">Photo: Dr. Xiaoyu Yang</span>
                </div>
              </div>
              <div className="pt-20 pb-8 px-8">
                <h3 className="text-2xl font-bold text-slate-900">Dr. Xiaoyu Yang</h3>
                <p className="text-sky-600 font-medium mb-4">Co-Founder</p>
                <p className="text-slate-600 text-sm leading-relaxed">
                  Clinical Research Physician and Trial Manager at Imperial College London with over 10 years of research experience. 
                  Expertise in managing complex clinical trials and ensuring rigorous adherence to protocol and safety standards.
                </p>
              </div>
            </div>

            {/* Founder 2 */}
            <div className="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300">
              <div className="h-32 bg-gradient-to-r from-slate-800 to-teal-800 relative">
                {/* Placeholder for Photo */}
                <div className="absolute -bottom-16 left-8 w-32 h-32 bg-slate-200 rounded-full border-4 border-white overflow-hidden flex items-center justify-center text-slate-400">
                    <span className="text-xs text-center px-2">Photo: Dr. Dennis Tiong</span>
                </div>
              </div>
              <div className="pt-20 pb-8 px-8">
                <h3 className="text-2xl font-bold text-slate-900">Dr. Shyun Ping (Dennis) Tiong</h3>
                <p className="text-teal-600 font-medium mb-4">Co-Founder</p>
                <p className="text-slate-600 text-sm leading-relaxed">
                  NIHR Academic Clinical Fellow in Respiratory Medicine at the University of East Anglia and Norfolk & Norwich University Hospital NHS Foundation Trust. 
                  Strong background in delivering research that directly benefits patients and translates to clinical practice.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Business / Services Section */}
      <section id="services" className="py-24 bg-blue-900 text-white relative overflow-hidden">
        {/* Decorative Background Elements */}
        <div className="absolute top-0 right-0 w-96 h-96 bg-sky-500/10 rounded-full blur-3xl"></div>
        <div className="absolute bottom-0 left-0 w-64 h-64 bg-teal-500/10 rounded-full blur-3xl"></div>

        <div className="container mx-auto px-6 relative z-10">
          <div className="flex flex-col md:flex-row gap-16 items-center">
            <div className="md:w-1/2">
              <div className="inline-block px-4 py-1 bg-sky-500/20 text-sky-300 rounded-full text-sm font-bold mb-4">
                For Sponsors & CROs
              </div>
              <h2 className="text-4xl md:text-5xl font-bold mb-6 leading-tight">
                Reliable Data.<br />Faster Timelines.
              </h2>
              <p className="text-blue-100 text-lg mb-8 leading-relaxed">
                We solve the biggest bottleneck in clinical trials: recruitment. By integrating research into primary care settings, Co-MedX offers access to a diverse, pre-screened patient population.
              </p>
              
              <ul className="space-y-4 mb-10">
                {[
                  "Rapid identification of eligible participants",
                  "Reduced screen-failure rates via GP pre-screening",
                  "Centralized London clinic for trial execution",
                  "Experienced physician-led management"
                ].map((item, i) => (
                  <li key={i} className="flex items-center gap-3">
                    <CheckCircle2 className="text-teal-400 shrink-0" size={20} />
                    <span className="text-slate-200">{item}</span>
                  </li>
                ))}
              </ul>

              <Button 
                variant="accent" 
                onClick={() => window.location.href = 'mailto:Xiaoyu.yang@co-medx.com'}
              >
                <Mail className="w-5 h-5" />
                Contact Dr. Yang for Partnership
              </Button>
            </div>

            <div className="md:w-1/2 grid grid-cols-1 sm:grid-cols-2 gap-6">
              <div className="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/10">
                <Microscope className="text-sky-400 mb-4" size={32} />
                <h4 className="font-bold text-xl mb-2">Phase I-IV</h4>
                <p className="text-sm text-blue-200">Capabilities to support various stages of clinical development.</p>
              </div>
              <div className="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/10">
                <Activity className="text-teal-400 mb-4" size={32} />
                <h4 className="font-bold text-xl mb-2">GCP Compliant</h4>
                <p className="text-sm text-blue-200">Strict adherence to Good Clinical Practice and regulatory standards.</p>
              </div>
              <div className="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/10 sm:col-span-2">
                <Syringe className="text-purple-400 mb-4" size={32} />
                <h4 className="font-bold text-xl mb-2">Therapeutic Focus</h4>
                <p className="text-sm text-blue-200">Specializing in chronic conditions manageable in primary care, respiratory medicine, and more.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* GP & Pharmacy Network Section */}
      <section id="network" className="py-24 bg-white">
        <div className="container mx-auto px-6">
          <div className="text-center mb-12">
            <h2 className="text-3xl md:text-4xl font-bold text-slate-900 mb-4">Join the Co-MedX Network</h2>
            <p className="text-lg text-slate-600 max-w-2xl mx-auto">
              Empower your practice and offer your patients access to cutting-edge treatments. 
              We partner with GPs and Pharmacies to bring research to the community.
            </p>
          </div>

          <div className="bg-slate-50 rounded-3xl p-8 md:p-12 shadow-sm border border-slate-100">
            <div className="grid md:grid-cols-2 gap-12 items-center">
              <div>
                <h3 className="text-2xl font-bold mb-6">Why Join Us?</h3>
                <div className="space-y-6">
                  <div className="flex gap-4">
                    <div className="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center shrink-0">
                      <Building2 className="text-blue-900" />
                    </div>
                    <div>
                      <h4 className="font-bold text-lg">Additional Revenue Stream</h4>
                      <p className="text-slate-600 text-sm">Compensated for pre-screening and referrals, adding value to your practice.</p>
                    </div>
                  </div>
                  <div className="flex gap-4">
                    <div className="w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center shrink-0">
                      <Users className="text-teal-800" />
                    </div>
                    <div>
                      <h4 className="font-bold text-lg">Patient Care</h4>
                      <p className="text-slate-600 text-sm">Provide patients with access to novel therapies and enhanced monitoring.</p>
                    </div>
                  </div>
                  <div className="flex gap-4">
                    <div className="w-12 h-12 rounded-full bg-sky-100 flex items-center justify-center shrink-0">
                      <Activity className="text-sky-800" />
                    </div>
                    <div>
                      <h4 className="font-bold text-lg">Research Contribution</h4>
                      <p className="text-slate-600 text-sm">Play a vital role in advancing medical science without disrupting your workflow.</p>
                    </div>
                  </div>
                </div>
              </div>

              {/* Form Area */}
              <div className="bg-white p-8 rounded-2xl shadow-lg border border-slate-100">
                {!showNetworkForm ? (
                   <div className="text-center py-12">
                     <h3 className="text-2xl font-bold mb-4 text-slate-800">Ready to Partner?</h3>
                     <p className="text-slate-500 mb-8">Register your practice in under 2 minutes.</p>
                     <Button variant="primary" className="w-full" onClick={() => setShowNetworkForm(true)}>
                        Join Network Now
                     </Button>
                   </div>
                ) : (
                  <form onSubmit={handleNetworkSubmit} className="space-y-4">
                    <div className="flex justify-between items-center mb-4">
                      <h3 className="text-xl font-bold text-slate-800">Practice Registration</h3>
                      <button type="button" onClick={() => setShowNetworkForm(false)} className="text-slate-400 hover:text-slate-600">
                        <X size={20}/>
                      </button>
                    </div>

                    {formStatus === 'success' ? (
                      <div className="bg-green-50 text-green-800 p-6 rounded-xl text-center">
                        <CheckCircle2 className="w-12 h-12 mx-auto mb-2 text-green-600" />
                        <p className="font-bold">Thank you!</p>
                        <p className="text-sm">We have received your details and will contact you shortly.</p>
                      </div>
                    ) : (
                      <>
                        <div>
                          <label className="block text-sm font-medium text-slate-700 mb-1">Practice/Pharmacy Name</label>
                          <input required type="text" className="w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all" placeholder="e.g. London Bridge Practice" />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-slate-700 mb-1">Contact Person</label>
                          <input required type="text" className="w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all" placeholder="Dr. Name" />
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <label className="block text-sm font-medium text-slate-700 mb-1">Phone</label>
                            <input required type="tel" className="w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all" placeholder="+44..." />
                          </div>
                          <div>
                            <label className="block text-sm font-medium text-slate-700 mb-1">Email</label>
                            <input required type="email" className="w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all" placeholder="practice@nhs.net" />
                          </div>
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-slate-700 mb-1">Address</label>
                          <textarea required rows="2" className="w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all" placeholder="Full practice address"></textarea>
                        </div>
                        <Button 
                          type="submit"
                          variant="primary" 
                          className="w-full mt-2"
                        >
                          {formStatus === 'submitting' ? 'Sending...' : 'Submit Registration'}
                        </Button>
                      </>
                    )}
                  </form>
                )}
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* General Contact Section */}
      <section id="contact" className="py-24 bg-slate-900 text-slate-300">
        <div className="container mx-auto px-6">
          <div className="grid md:grid-cols-2 gap-12">
            <div>
              <div className="flex items-center gap-2 mb-6">
                 <div className="bg-blue-600 text-white p-1.5 rounded">
                    <Activity size={20} />
                 </div>
                 <span className="text-2xl font-bold text-white">Co-MedX</span>
              </div>
              <p className="mb-8 text-slate-400 max-w-sm">
                Connecting Primary Care to Clinical Research. 
                Advancing medicine through efficient, patient-centric trials.
              </p>
              <div className="flex gap-4">
                 {/* Social placeholders */}
                 <div className="w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors cursor-pointer">
                   <span className="font-bold text-white">in</span>
                 </div>
                 <div className="w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center hover:bg-sky-500 transition-colors cursor-pointer">
                   <span className="font-bold text-white">t</span>
                 </div>
              </div>
            </div>

            <div>
              <h3 className="text-white font-bold text-xl mb-6">Get in Touch</h3>
              <div className="space-y-4">
                <a href="mailto:Xiaoyu.yang@co-medx.com" className="flex items-center gap-4 hover:text-sky-400 transition-colors group">
                  <div className="w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center group-hover:bg-sky-900 transition-colors">
                    <Mail size={18} />
                  </div>
                  <span>Xiaoyu.yang@co-medx.com</span>
                </a>
                <div className="flex items-center gap-4 text-slate-400">
                  <div className="w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center">
                    <MapPin size={18} />
                  </div>
                  <span>London, United Kingdom</span>
                </div>
              </div>

              <div className="mt-8 pt-8 border-t border-slate-800 text-sm text-slate-500">
                Â© {new Date().getFullYear()} Co-MedX. All rights reserved.
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Back to Top Button */}
      <button 
        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
        className={`fixed bottom-8 right-8 p-3 bg-blue-900 text-white rounded-full shadow-lg hover:bg-sky-500 transition-all duration-300 z-40 ${isScrolled ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
      >
        <ArrowRight className="-rotate-90" size={20} />
      </button>

    </div>
  );
};

export default App;
